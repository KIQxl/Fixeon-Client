<div class="dashboard">
  <h2>Bem-vindo, {{email}} 👋</h2>
  <p class="subtitle">Aqui está um resumo das atividades recentes</p>
  <div class="dashboard-container">
    <div class="card">
      <div class="card-header">
        <h2>Chamados</h2>
      </div>
      <div class="card-content">
        <div class="tabs-list">
          <button
            [class.active]="activeTab === 'meus'"
            (click)="setActiveTab('meus')"
          >
            <span class="icon">👤</span>
              Meus Chamados
            <span class="badge">{{ getTabCount('meus') }}</span>
          </button>
          <button
            [class.active]="activeTab === 'pendentes'"
            (click)="setActiveTab('pendentes')"
          >
            <span class="icon">⚠️</span>
              Pendentes da Equipe
            <span class="badge">{{ getTabCount('pendentes') }}</span>
          </button>
          <button
            [class.active]="activeTab === 'andamento'"
            (click)="setActiveTab('andamento')"
          >
            <span class="icon">🕒</span>
              Em Andamento da Equipe
            <span class="badge">{{ getTabCount('andamento') }}</span>
          </button>
          <button
            [class.active]="activeTab === 'porAnalista'"
            (click)="setActiveTab('porAnalista')"
          >
            <span class="icon">👥</span>
              Por Analista
            <span class="badge">{{ getTabCount('porAnalista') }}</span>
          </button>
        </div>

        <div class="table-container">
          <table class="tickets-table">
            <thead>
              <tr>
                <th>ID do Chamado</th>
                <th>Assunto</th>
                <th>Requirente</th>
                <th>Status</th>
                <th>Analista Responsável</th>
                <th>Prioridade</th>
                <th>Última Atualização</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let ticket of filteredTickets" (click)="goToTicketDetails(ticket.id)" >
                <td class="ticket-id">{{ ticket.protocol }}</td>
                <td class="ticket-assunto">{{ ticket.title }}</td>
                <td class="ticket-assunto">{{ ticket.customer.userEmail}} ({{ticket.customer.organizationName}})</td>
                <td>
                  <span class="status-badge" [ngClass]="getStatusClass(ticket.status)">
                    {{ ticket.status }}
                  </span>
                </td>
                <td>{{ ticket.analyst.analystEmail}}</td>
                <td>
                  <span class="priority-badge " [ngClass]="getPriorityClass(ticket.priority)">
                    {{ ticket.priority }}
                  </span>
                </td>
                <td class="ticket-update">{{ ticket.modifiedAt | date: 'HH:mm - dd/MM/yyyy'}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
